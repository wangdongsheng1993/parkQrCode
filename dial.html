<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <title>联系车主</title>
    <style>
      :root { --bg:#0b1220; --card:#ffffff; --text:#0b1220; --muted:#6b7280; --accent:#14532d; --accent2:#22c55e; }
      * { box-sizing: border-box; }
      body { margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; background: var(--bg); color: var(--text); }
      .wrap { min-height: 100vh; display: grid; place-items: center; padding: 20px; }
      .card { width: 360px; max-width: 92vw; background: var(--card); border-radius: 16px; border: 2px solid #111827; padding: 18px; display: grid; gap: 16px; }
      .badge { display: inline-flex; align-items: center; gap: 8px; background: #f0fdf4; color: var(--accent); border: 1px solid #dcfce7; padding: 8px 12px; border-radius: 999px; font-weight: 600; }
      .hint { text-align: center; font-size: 15px; color: #374151; line-height: 1.6; }
      .number { text-align: center; font-size: 22px; font-weight: 700; letter-spacing: 1px; }
      .btn { appearance: none; border: 0; width: 100%; background: var(--accent2); color: white; padding: 12px 16px; border-radius: 12px; font-size: 16px; cursor: pointer; }
      .actions { display: grid; gap: 10px; }
      .tips { text-align: center; font-size: 12px; color: var(--muted); }
    </style>
  </head>
  <body>
    <div class="wrap">
      <div class="card">
        <div class="badge">联系车主</div>
        <div class="hint" id="hintText">扫码一键拨打，与车主联系</div>
        <div class="number" id="numberText"></div>
        <div class="actions">
          <button class="btn" id="callBtn">联系车主</button>
        </div>
        <div class="tips">若无法自动拨号，请手动复制号码拨打</div>
      </div>
    </div>
    <script>
      function getParam(name) { return new URLSearchParams(location.search).get(name) || ''; }
      function normalizePhone(raw) { return String(raw || '').replace(/\s+/g, '').replace(/[^\d+]/g, ''); }
      function maskPhoneDisplay(num) {
        const cleaned = String(num || '').replace(/\s+/g, '');
        let prefix = '';
        let digits = cleaned;
        const m = cleaned.match(/^(\+\d{1,3})(\d+)$/);
        if (m) { prefix = m[1]; digits = m[2]; }
        if (digits.length >= 7) {
          const masked = digits.slice(0, 3) + '****' + digits.slice(-4);
          return prefix + masked;
        }
        return cleaned;
      }
      const phone = normalizePhone(getParam('p'));
      const msg = (getParam('m') || '').trim() || '扫码一键拨打，与车主联系';
      const hintText = document.getElementById('hintText');
      const numberText = document.getElementById('numberText');
      const callBtn = document.getElementById('callBtn');
      hintText.textContent = msg;
      numberText.textContent = phone ? maskPhoneDisplay(phone) : '';
      function buildTelURI(num) { return 'tel:' + num; }
      callBtn.addEventListener('click', function(){ if (phone) window.location.href = buildTelURI(phone); });
    </script>
  </body>
</html>
